# Лабораторная №2

Плохие практики в написании dockerfile'ов и в работе с контейнерами. Как их исправить? Поехали.

## Плохие практики в Dockerfile
Пример плохого docker-файла:
```
FROM python:latest
COPY . /app
RUN pip install -r /app/requirements.txt
WORKDIR /app
CMD ["python", "app.py"]
```

1. **Использование python:latest**: Выбор последней версии образа может уже не подходить для вашего проекта.
2. **Копирование всей директории**: Использование `COPY . /app` может привести к копированию ненужных файлов.
3. **Неуказание версий зависимостей**: Аналогично с первым пунктом.

## Исправленный Dockerfile:
```
FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt /app/requirements.txt
RUN pip install --no-cache-dir -r /app/requirements.txt
COPY src/ /app/src/
CMD ["python", "src/app.py"]
```

1. **Указание конкретной версии образа**: Использование `python:3.9-slim` позволяет зафиксировать версию, и избежать лишних глупых проблем.
2. **Оптимизация копирования файлов**: Копируем только необходимые файлы проекта (например, `requirements.txt` и исходники), что уменьшает размер образа.
3. **Установка зависимостей с указанием версий**: Установка зависимостей по конкретным версиям защищает от внезапных обновлений, которые и ломают наши приложения)


## Плохие практики в работе с контейнерами

1. Запуск контейнеров с правами root:
- **Почему это плохо**: Запуск контейнера от имени пользователя `root` увеличивает риски безопасности. 
- **Решение**: Всегда создаем и используем обычного пользователя для запуска контейнеров.

2. Отсутствие ограничения ресурсов для контейнера:
- **Почему это плохо**: Если не задать лимиты на использование памяти и CPU для контейнера, он может начать жрать слишком много ресурсов системы.
- **Решение**: Используйте флаги `--memory` и `--cpus` для ограничений, которые может использовать контейнер